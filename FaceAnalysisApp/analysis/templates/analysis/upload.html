{% extends 'FaceAnalysisApp/base.html' %}
{%block title%}Analysis{%endblock%}
{% load static %}
{% block css%}   
	<link href="{% static 'analysis/css/analysis.css'%}" rel="stylesheet">
  <link href="{% static 'analysis/css/header.css'%}" rel="stylesheet">
  <link href="{% static 'analysis/css/upload.css'%}" rel="stylesheet">

  <script type="text/javascript" src="{% static 'analysis/js/analysis.js'%}"></script>

<!--    <style>
    a {
    text-decoration: none;
    background-color: transparent;
}
body {
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    text-align: left;
}
  </style> -->
{% endblock %}
{%block auth%}

          <li class="nav-item study">
<!--          <a class="nav-link" href="">Camera Display</a>-->
        </li>
{%endblock%}

{%block body%}
<br>

<div class="cam">
      <div class="heading-train">
        <p>
          Train Data <br class="train-button"><a id="train" href="{% url 'analysis:train' %}">Click Here</a>
        </p>
      </div>
<!--        <div class="heading-train">
        <p>
          Access deleted data <a href="#">Click Here</a>
        </p>
      </div>
 -->
    <br>
    <div class="heading-train">
    <form method="get" action="{% url 'analysis:face-analysis' %}">
      <p>
        Face Analysis
        <select style="" name="camera_id">
            <option style="" value="0" selected="selected" hidden>Webcam</option>
            {% for camera in cameras %}
            <option value="{{camera.id}}">{{camera}}</option>
            {% endfor %}
        </select>
        <button>Analysis</button>
      </p>
    </form>
      
    </div>


</div><!--cam-->

<!-- 
<form enctype="multipart/form-data" method="post">
    {% csrf_token %}
    <input type="text" name="name" >
    <button>Submit</button>
</form>
 -->
<!-- <a href="{% url 'analysis:train' %}" id="train">Train</a>
 -->


<div class="list-data">
  <div class="row">
    <div class="col">
      <div class="head" style="text-align: center;">
          <p>List of People</p>
        </div>
      <div class="names">
        <table width=100%>
        {% for person in people %}
          <tr>
            <td>
              {{person}}
            </td>
            <td>
              <a href="{% url 'analysis:delete-person' person_id=person.person_id %}"><img src="https://img.icons8.com/flat_round/24/000000/delete-sign.png"/ title="Delete"></a>
            </td>
            <td>
              <a href="{% url 'analysis:display-image' person_id=person.person_id %}"><img src="https://img.icons8.com/nolan/24/visible.png" title="Read"></a>
            </td>
          </tr>
          {%endfor%}
        </table>
      </div>
    </div>

<!-- 

<ul>
    {% for person in people %}
    <li><a href="{% url 'analysis:display-image' person_id=person.person_id %}">{{person}}</a> <a href="{% url 'analysis:delete-person' person_id=person.person_id %}">delete</a></li>
    {%endfor%}
</ul>

 -->

     <div class="col">
      <div class="new-names">
        <div class="head">
          <p>Add New Names</p>
        </div>

        <div class="name-box-enter">
        <form enctype="multipart/form-data" method="post">
            {% csrf_token %}
          <input type="text" id="name" name="name" placeholder="Enter Full Name" class="name-box"><br><br>
        
        <div class="buttons-submit">
           <button>Submit</button>
           <!-- <a href="#" data-toggle="modal" data-target="#upload-photo">Upload Photo</a> -->
        </div>
        </form>

        </div>
        
      </div><!--new names-->
    </div><!--col-->

  </div><!--row-->
</div><!--list name-->

<div id="train-modal" style="display:none;z-index:22;background-color:lightblue;text-align:center;
position:absolute;">
    <video width="500px" autoplay loop muted style="margin:40px auto;">
        <source src="/media/videos/train-load.mp4" type="video/mp4">
    </video>
    <br>
    <span>Still loading...</span>
</div>

<script>
let a = document.getElementById('train');

let m = document.getElementById('train-modal');

a.addEventListener('click', (e)=>{
    e.preventDefault();
    m.style.display = 'block';
    $.ajax({
    type: "GET",
    url: "{% url 'analysis:train' %}",
    contentType: "application/json; charset=utf-8",
    success: function(result){
    m.style.display = 'none';
    },
    error: function(e){
    console.log("some error", e);
    m.style.display = 'none';
    }
});
})
</script>

{%endblock%}
